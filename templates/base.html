<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <title>APOD.com</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,700" rel="stylesheet">
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src='https://raw.githubusercontent.com/louisremi/jquery.backgroundXY.js/master/jquery.backgroundXY.js'></script>
    <script src='https://craig.global.ssl.fastly.net/js/gator.min.js?ff1b9'></script>
    <script src="{% static 'scripts.js' %}"></script>
</head>

<body data-spy="scroll" data-target=".navbar" data-offset="50">
{% block 'content' %}
<div id="header" class="container-fluid">
    <div id="title">
        <h1>APOD.com</h1>
        <h2><i>Astronomy Picture Of the Day</i></h2>
    </div>
</div>

<!-- The Navbar -->
<nav class="navbar navbar-inverse">
    <img id="logo-main" src="{% static 'Logo.png' %}">
    <div class="container-fluid">
        <div class="navbar-header"><b>
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">APOD.com</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                      <li><a href="#whatisapod">What is APOD?</a></li>
                      <li><a href="#apods">Newest APODs</a></li>
                      <li><a href="#app">APOD-Pocket app</a></li>
                      <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<section id="whatisapod" class="parallax container-fluid">
    <h1>What is APOD?</h1>
</section>
<div id="whatisapod-caption" class="caption container-fluid">
    <div>
        <p>APOD is Astonomy Picture Of the Day.</p>
        <p>Each day a different image or photograph of our fascinating universe is featured by Nasa, along with a brief explanation written by a professional astronomer. </p>
    </div>
</div>

<div id="apods" class="container-fluid">
    <h1>Watch newest APODs</h1>
    <div class="row">
        {% for data in object_list %}
        <div class="col-xs-12 col-md-4">
            <div class="panel panel-default">
                <div class="panel-image hide-panel-body">
                    <img id="img{{ forloop.counter}}" src="{{ data.url }}" alt="{{ data.explanation }}" class="panel-image-preview"/>
                </div>
                <div class="panel-heading" style="background-color:#1a001a; color:white;">
                    <p><b>{{ data.date }}</b></p>
                    <h4>{{ data.title }}</h4>
                    <p style="font-size:10px">Copyright: {{ data.copyright }}</p>
                </div>
            </div>
        </div>

        <!-- Apods Modal -->
        <div id="apodsModal" class="modal panel panel-default">
            <span class="close">(x) close</span>
            <img class="modal-content" id="img">
            <div id="caption"></div>
        </div>

        <script>
        var modal = document.getElementById('apodsModal');
        var img = document.getElementById('img{{ forloop.counter}}');
        var modalImg = document.getElementById("img");
        var captionText = document.getElementById("caption");
        img.onclick = function(){
            modal.style.display = "block";
            modalImg.src = this.src;
            modalImg.alt = this.alt;
            captionText.innerHTML = this.alt;
        }
        var span = document.getElementsByClassName("close")[0];
        span.onclick = function() {
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        </script>

        {% endfor %}
    </div>
   <div id="link"><a href="archive"><button class="archive-button"><span>Full Archive</span></button></a></div>
</div>

<div id="app" class="parallax container-fluid">
  <h1>APOD-Pocket app</h1>
</div>
<div id="app-caption" class="caption container-fluid">
    <div class="col-md-7">
        <p style="margin:10vh;">Download APOD-Pocket app on Your Android device to watch Apods wherever you like</p>
        <div class="popup" onclick="myFunction()">
            <a><img src="https://play.google.com/intl/en_us/badges/images/badge_new.png"></a>
            <span class="popuptext" id="myPopup">APOD-Pocket app available soon!</span>
        </div>
    </div>
    <div class="col-md-5">
        <img id="app-img" src="{% static 'app.png' %}">
    </div>
</div>
<div id="contact" class="parallax container-fluid">
  <h1>Contact</h1>
</div>
<div id="contact-caption" class="caption container-fluid">
    <p>In Progress...</p>
</div>
<script>
	// parallaxing
var images = [].slice.call(document.querySelectorAll('.parallax'));
function getViewportHeight() {
    var a = document.documentElement.clientHeight, b = window.innerHeight;
    return a < b ? b : a;
}

function getViewportScroll() {
    if(typeof window.scrollY != 'undefined') {
        return window.scrollY;
    }
    if(typeof pageYOffset != 'undefined') {
        return pageYOffset;
    }
    var doc = document.documentElement;
    doc = doc.clientHeight ? doc : document.body;
    return doc.scrollTop;
}

function doParallax() {
    var el, elOffset, elHeight,
        offset = getViewportScroll(),
        vHeight = getViewportHeight();

    for(var i in images) {
        el = images[i];
        elOffset = el.offsetTop;
        elHeight = el.offsetHeight;

        if((elOffset > offset + vHeight) || (elOffset + elHeight < offset)) { continue; }

        el.style.backgroundPosition = '50% '+Math.round((elOffset - offset)*3/8)+'px';
    }
}

Gator(window).on('scroll', doParallax);
</script>
{% endblock %}
<div id="footer" class="container-fluid">
    <h4 style="vertical-align: middle;">Â© 2016 APOD.com</h4>
</div>
</body>
</html>

